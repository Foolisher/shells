## 问题

* **consumer消费成功后更新offset失败**
  * 导致重复消费
* **如何实现一个主题消息并发消费**
* * 这个主题可以分为多个分区

  * 然后这多个分区被一个consumerGroup消费
* **消息同步失败怎么办**
* * 导致其他机器的limit落后，如果limit更新了，而消费者读落后的机器将漏读消息
  * 同步刷盘可以解决问题，但是同步刷盘效率低
  * 异步刷盘回调 ，若失败或超时未确认则重新投递，这样用客户端
* **如何保障消息有序**
* * 局部排序？
* **如何保障消息可查询**
* * 用消息id建一个索引，id用hash取模，然后放入不同文件，把id倒排索引，
* **发送Leader成功后，Leader马上失败**
* * Leader马上失败，follower没有来得及同步，然后一个follower被选为Leader，但是此时Leader'的HW并没有更新，数据也没有写进来，造成消息丢失
  * * 怎么解决：







